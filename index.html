<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="努力是看不见的，能看见的只有结果">
<meta property="og:type" content="website">
<meta property="og:title" content="厚积薄发">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="厚积薄发">
<meta property="og:description" content="努力是看不见的，能看见的只有结果">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="厚积薄发">
<meta name="twitter:description" content="努力是看不见的，能看见的只有结果">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/"/>

  <title> 厚积薄发 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">厚积薄发</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">yesterday, you said tomorrow</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/vim/" itemprop="url">
                  未命名
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-13T15:29:48+08:00" content="2016-09-13">
              2016-09-13
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><em>#</em> Vim使用</p>
<p>标签（空格分隔）： 工具 vim</p>
<hr>
<h2 id="模式"><a href="#模式" class="headerlink" title="模式"></a>模式</h2><ul>
<li>normal-mode 也叫command-mode，用于操作</li>
<li>insert-mode 用于编辑<br><strong>i</strong> 当前光标处插入<br><br><strong>a</strong> 当前光标后插入<br><br><strong>I</strong> 当前行首<br><br>A 当前行尾<br><br>o 当前光标行后插入新行<br><br>O 当前行前插入新行<br><br>cw 剪切当前光标开始的word，并插入 <br></li>
<li>visual-mode 暂时不清楚</li>
</ul>
<h2 id="打开-amp-保存-amp-退出"><a href="#打开-amp-保存-amp-退出" class="headerlink" title="打开&amp;保存&amp;退出"></a>打开&amp;保存&amp;退出</h2><p>vim /path/to/your/file<br>:e /path/to/your/file</p>
<p>:w<br>:x 需要时保存<br>:wq<br>ZZ<br>:q! 退出不保存</p>
<h2 id="复制-amp-粘贴"><a href="#复制-amp-粘贴" class="headerlink" title="复制&amp;粘贴"></a>复制&amp;粘贴</h2><h2 id="移动"><a href="#移动" class="headerlink" title="移动"></a>移动</h2><table>
<thead>
<tr>
<th>分类</th>
<th>命令</th>
<th>作用</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>页间</td>
<td>ctrl + b</td>
<td>向前翻页</td>
<td>Backward</td>
</tr>
<tr>
<td></td>
<td>ctrl + f</td>
<td>先后翻页</td>
<td>Forward</td>
</tr>
<tr>
<td>行间</td>
<td>gg</td>
<td>第一行</td>
<td>非空白字</td>
</tr>
<tr>
<td></td>
<td>G</td>
<td>最后一行</td>
<td>goto，实际是调转到某一行行首，XG</td>
</tr>
<tr>
<td></td>
<td>X%</td>
<td>按百分比跳转</td>
<td></td>
</tr>
<tr>
<td></td>
<td>hjkl</td>
<td>左下上右</td>
<td>使手不必离开打字区，以加快打字速度<br>支持重复自己</td>
</tr>
<tr>
<td></td>
<td>:X</td>
<td>跳转到某行</td>
<td></td>
</tr>
<tr>
<td>行间</td>
<td>0</td>
<td>行首</td>
<td>非空白字符，^的映射键</td>
</tr>
<tr>
<td></td>
<td>$</td>
<td>行尾</td>
<td></td>
</tr>
<tr>
<td>语义</td>
<td>w</td>
<td>后一个单词首部</td>
<td>iskeyword</td>
</tr>
<tr>
<td></td>
<td>b</td>
<td>前一个单词首部</td>
<td></td>
</tr>
<tr>
<td></td>
<td>e</td>
<td>后一个单词尾部</td>
<td></td>
</tr>
<tr>
<td></td>
<td>ge</td>
<td>前一个单词尾部</td>
<td></td>
</tr>
<tr>
<td></td>
<td>(</td>
<td>前一句首部</td>
<td>.!?结尾的行或空白符</td>
</tr>
<tr>
<td></td>
<td>)</td>
<td>后一句尾部</td>
<td></td>
</tr>
<tr>
<td></td>
<td>{</td>
<td>前一段</td>
<td>空白行间隔</td>
</tr>
<tr>
<td></td>
<td>}</td>
<td>后一段</td>
</tr>
</tbody>
</table>
<h2 id="查找-amp-替换"><a href="#查找-amp-替换" class="headerlink" title="查找&amp;替换"></a>查找&amp;替换</h2><p>/pattern 从首行开始向下查找 n 后一个 N 前一个 </p>
<p>?pattern 从尾行开始向上查找 n 后一个 N 前一个 </p>
<p>%  匹配([{ 间跳转</p>
<p># 所在单词上一个 </p>
<p>* 所在单词下一个</p>
<p>:[addr]s/old/new/[option]</p>
<ul>
<li>[addr] 表示替换范围，默认为当前行。 st,ed：起始范围，., ^, $,N分别表示 当前行，首行，尾行，数字代表的某一行，比如：1，20： 从 第一行到第20行；“. ,$” ：从当前行到文件尾；% 整个文件的，相当于1，$</li>
<li>s : 表示替换操作，substitute</li>
<li>old</li>
<li>new</li>
<li>[option] : 参数，比如：i 忽略大小写；g 表示全局替换; c 表示进行确认</li>
</ul>
<p>相关设置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">:set hls  # 高亮搜索结果 </div><div class="line">:set incsearch  # 增量式搜索，即时搜索，</div><div class="line">:set ignorecase # 忽略大小写</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/hello-world/" itemprop="url">
                  Hello World
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-13T14:36:53+08:00" content="2016-09-13">
              2016-09-13
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/04/ubuntu-tools/" itemprop="url">
                  ubuntu-tools
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-04-01T13:54:01+08:00" content="2016-04-01">
              2016-04-01
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>中午瞌睡的时候 不小心把 /etc目录给删掉了 没有办法拷别人的etc 只好重装<br>顺便记一下必备的工具</p>
<h4 id="1-chrome"><a href="#1-chrome" class="headerlink" title="1. chrome"></a>1. chrome</h4><p>从<a href="https://www.google.com/chrome/browser/desktop/index.html" target="_blank" rel="external">官网</a>下载安装包<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dpkg -i  google-chrome-stable_current_amd64.deb</div></pre></td></tr></table></figure></p>
<h4 id="2-sogou-pinyin"><a href="#2-sogou-pinyin" class="headerlink" title="2. sogou pinyin"></a>2. sogou pinyin</h4><p>从<a href="http://pinyin.sogou.com/linux/" target="_blank" rel="external">官网</a>下载安装包 如果没装fcitx 要先装fcitx<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install fcitx</div><div class="line">dpkg -i sogoupinyin_2.0.0.0068_amd64.deb</div><div class="line">sudo apt-get install <span class="_">-f</span> -y</div></pre></td></tr></table></figure></p>
<p>all setttings -&gt; language support -&gt; keyboard input method system<br>选择fcitx 然后 重启</p>
<h4 id="3-sublime-text"><a href="#3-sublime-text" class="headerlink" title="3. sublime-text"></a>3. sublime-text</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sudo add-apt-repository ppa:webupd8team/sublime-text-3</div><div class="line">sudo apt-get update</div><div class="line">sudo apt-get install sublime-text-installer</div></pre></td></tr></table></figure>
<p>从<a href="https://packagecontrol.io/installation" target="_blank" rel="external">这里</a>可以找到Package Control的安装脚本<br>上次发现的超酷炫的<a href="https://github.com/kkga/spacegray/" target="_blank" rel="external">theme</a></p>
<h4 id="4-pycharm"><a href="#4-pycharm" class="headerlink" title="4. pycharm"></a>4. pycharm</h4><p>一个很强大的py ide 下载地址在<a href="https://www.jetbrains.com/pycharm/download/" target="_blank" rel="external">这里</a><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">tar xfz pycharm-professional-2016.1.2.tar.gz</div><div class="line"><span class="built_in">cd</span> pycharm-professional-2016.1.2/bin</div><div class="line">install.sh</div></pre></td></tr></table></figure></p>
<p>然后发现个可以注册lience的<a href="http://idea.qinxi1992.cn/" target="_blank" rel="external">地方</a></p>
<h4 id="5-vim"><a href="#5-vim" class="headerlink" title="5. vim"></a>5. vim</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install vim</div></pre></td></tr></table></figure>
<p>配置文件 ~/.vimrc 还好已经备份</p>
<h4 id="6-ssh"><a href="#6-ssh" class="headerlink" title="6. ssh"></a>6. ssh</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install openssh-server</div></pre></td></tr></table></figure>
<p>直接拷贝 .ssh 文件夹里的两个key<br>或者重新生成新的</p>
<h4 id="6-git-没什么可多说的"><a href="#6-git-没什么可多说的" class="headerlink" title="6. git 没什么可多说的"></a>6. git 没什么可多说的</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install git-core</div></pre></td></tr></table></figure>
<h4 id="7-terminator"><a href="#7-terminator" class="headerlink" title="7. terminator"></a>7. terminator</h4><p>还有个tmux大家都在用 有空也研究一下<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install terminator</div><div class="line">sudo update-alternatives --config x-terminal-emulator</div></pre></td></tr></table></figure></p>
<h4 id="7-java"><a href="#7-java" class="headerlink" title="7. java"></a>7. java</h4><p>跟c/c++一样 有一些软件得有java环境才能运行<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">sudo add-apt-repository ppa:webupd8team/java </div><div class="line">sudo apt-get update </div><div class="line">sudo apt-get install oracle-java8-installer</div><div class="line">java -version</div></pre></td></tr></table></figure></p>
<p>还有JAVA_HOME这个环境变量<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">export</span> JAVA_HOME=/usr/lib/jvm/java-8-oracle/ <span class="comment"># ~/.bashrc </span></div><div class="line">or</div><div class="line">JAVA_HOME=<span class="string">"/usr/lib/jvm/java-8-oracle/"</span>      <span class="comment"># /etc/environment</span></div></pre></td></tr></table></figure></p>
<p> 参考：</p>
<p> <a href="http://blog.csdn.net/tao_627/article/details/45054057" target="_blank" rel="external">http://blog.csdn.net/tao_627/article/details/45054057</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/bottle-notes/" itemprop="url">
                  bottle-notes
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-30T15:48:04+08:00" content="2016-03-30">
              2016-03-30
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>为了接下来能快速的写那个反馈后台，需要从原理上理解bottle<br>之前看过doc，今天准备在进一步，阅读source，</p>
<p>这次看得是bottle 0.13-dev的代码， 4000多行</p>
<h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>1-21行：<br>简单的介绍bottle，然后有作者的大名</p>
<h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><p>23-59行：<br>主要是为了给server是gevent和eventlet的情况 导入他们必须要用的monkey-patch库 ，monkey-patch就是需要执行的时候动态修改代码的一个patch，因为gevent等异步相关的库会用自己的方法替换掉python标准库中的thread/socket<br>这里还写了bottle 的 arg_parse 供main使用</p>
<p>70-120行：<br>导入一些标准库<br>其中getargspec是标准库inspect里，用来获取方法声明的参数名和默认参数值，<br>和处理json的函数需要安装simplejson或者标准库里没有</p>
<p>122-219行：<br>作者尝试着处理py2和py3的不兼容的用法：<br>python3 才有 as 所以作者调取了sys.exc_info<br>print在2中是一个statement 而在3中是一个funciton 作者统一到了_stdout和_stderr<br>然后导入了python3和python2的库 并统一了一些方法<br>统一了tonat来处理字符串 tob和touni都想转成utf8<br>这里插播一点知识：当程序有了问题，找出问题然后解决，这叫Fix;而问题没法解决，就像个办法忽略这个错误，使其不能影响程序，这叫 Workaround<br>有些bug 作者就通过pass 这个exception，<br>或者写了个不能close的NCTextIOWrapper（never close，用一个空方法覆盖close）<br>然后写了三个property 特点分别是dict-like，cache-able， lazy ！！！这里没看懂</p>
<h3 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h3><p>302-304行：<br>定义了一个BottleException 啥也没写</p>
<h3 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h3><p>311-330行：<br>定义了各种route的exception，因为只是集成关系，所以都没有实现</p>
<p>333-340行：<br>定义了一个替换函数 ！！！但是没看懂替换掉了什么样的字符串</p>
<p>342-545行：<br>定义了Router类<br>Router是一个route-&gt;target的pair组成的有序集合，target可以是stirng，ID或者callable。route可以是静态或者动态的<br>！！！没太看懂<br>主要是有用正则匹配规则然后添加到集合里</p>
<p>548-650行：<br>定了了Route类<br>route包括一个callback，运行在指定的一些配置下，<br>主要是一个_make_callback 函数 也就是call的函数主体 另外一个方法是get_undecorated_callback<br>可见make_callback 就是在decorate 要跑一遍plugin的操作</p>
<h3 id="Application"><a href="#Application" class="headerlink" title="Application"></a>Application</h3><p>657-1140行：<br>定了Bottle类<br>每一个bottle对象就是一个web 应用<br>init里可以看出<br>routes 是 Route的实例<br>router 是 Router的实例<br>config 是一个ConfigDict init只指定了 fatchall和autojson<br>plugins init的时候可能会装JSONPlugin和TemplatePlugin </p>
<p>还有新加的hook机制<br>在init里指定了一些触发时机<br>随后也有一些添加删除的方法</p>
<p>然后是一个mount方法 将一个以prefix开头的path 这样可以实现命名空间的分离<br>比如 parent_app.mount(‘/prefix/‘, child_app)      mount的对象可以是一个bottle的实例上也可以是其他的wsgi app上<br>mount的bottle自己的操作：先检查是否重复挂载，没有以/结尾等问题，如果么问题 就添加app里的数据给parent_app</p>
<p>mount到其他app的操作：<br>设置了path-depth 然后给option设置了一些值 关键是设定了 app的callback方法 然后将所有prefix下的path都route到option设定的</p>
<p>merge操作 可以合并routes 调用 add_route</p>
<p>install 就是可以加入pulgin 在route的时候 pulgin有一定要求要callable或者有.apply方法<br>对应的有uninstall</p>
<p>reset方法 清空缓存 重置路由 还要触发一个hook<br>close方法 关闭plugins<br>match方法 就是route的match</p>
<p>geturl 算是一个utill 可以获取当前route的所在的url</p>
<p>route方法 最常见的方法 就是字面意思 只不过是一个decorator<br>会覆盖之前的同一个path的router 主要docoratort的是实例化了一个Route然后append到bottle的route-list里<br>接下来 get post put delete patch 这5个方法 只是换了不一样的method</p>
<p>_handle<br>比较重要的方法 先是设置了environ的一些参数 path handle route args等信息<br>然后调用了route的call 这里主要是有好多try 请求发送出去之前bind envrion 然后bind response 得到route call以后的结构以后 还要这个结果放到 response 还要在发送之前和之后触发对应时机的hook</p>
<p>_cast 给call返回的结果设定一些header 或者进行一些包装 使得能够兼容WSGI<br>但是没有看到究竟是在哪里调用的</p>
<p>wsgi<br>这个是bottle的application方法<br>第一句就是 out = _cast(_handle(environ))<br>然后是一些特殊情况要直接关闭out<br>然后start_response 是设定status_line 和 response_header<br>这里有一个try except 如果fetchall是false 就是可以给 debug用 之前init的地方有写 如果不是 就构造出一个error的response</p>
<p>最后就是一个对内的解释 <strong>call</strong> </p>
<h3 id="Response-amp-Request"><a href="#Response-amp-Request" class="headerlink" title="Response&amp;Request"></a>Response&amp;Request</h3><p>1148-1591行 :<br>BaseRequest<br>包含了一堆property 其中哦有一部分就是environ<br>就是http request的head的一些对应 最后有一个get set del</p>
<p>1597-1612行：<br>HeaderProperty：<br>为header而写的一个decorator</p>
<p>1615-1859行：<br>BaseResponse：<br>一个存储用的class 存储了 response的header body cookies<br>这两个类可以看得出来写一个web 应用框架还是很需要http的知识的 中途作者还遵守了几个rfc的要求<br>这个类里设定了header 还有 cookie 还是需要看的</p>
<p>1862-1901行：<br>这里有一个local_property的方法是基于当前线程的local()的方法<br>然后有两个Local 一个LocalResponse一个LocalRequest<br>里边的有两个变量 bind 是 对应的 init 然 body就是local_property 目测用法就是可以随时get set del 当前处理的对象</p>
<p>1905-1930行：<br>Response就是BaseResponse<br>Request就是BaseRequest<br>然后定了一个HttpResponse 除了init方法还有一个apply方法但是给一个叫other的对象强行绑response</p>
<h3 id="Plugins"><a href="#Plugins" class="headerlink" title="Plugins"></a>Plugins</h3><p>1937-1990行：<br>这里主要是两个内置的Plugin：<br>JsonPlugin：用之前定义的json_dumps 写一个decoretor 写好content_type 然后return<br>TemplatePlugin：从route里取出template的配置 然后调用view（一个在后边实现的decoretor）</p>
<p>1995-2024行：<br>一个叫_ImportRedirect的类 看起来是导入module的但是没看到调用</p>
<h3 id="Utilities"><a href="#Utilities" class="headerlink" title="Utilities"></a>Utilities</h3><p>2031-2131行：<br>MultiDict 一个key可以有多个value对应的的dict 不用all得到最新的 用all得到全部的</p>
<p>2134-2279行：<br>一个FormDict 一个HeaderDict 一个WSGIHeaderDict 抢两个基于MultiDict的特定的Dict要有一些特定场合的实现 最后的这个需要处理字符问题 都是要实现一个 get set del 或者len items之类的操作</p>
<p>2282-2416行：<br>一个ConfigDict<br>存储configuration的一个class<br>可以从module file dict中读取key/value的配置<br>具有setdefault 和 update方法 好像还有on_change的方法 就是调一遍listener<br>还有meta的get set fallback</p>
<p>2419-2438行：<br>Appstack<br>list模拟的stack 每次返回list末尾的bottle实例</p>
<p>2441-2552行：<br>WSGIFileWrapper<br>一个模拟文件的对象 iter 是一个不断读取数据的函数 yield使这一个函数非常简单</p>
<p>2455-2468行：<br>_closeiter<br>一个用来给没有close方法的object加上这个方法 </p>
<p>2471-2554行：<br>ResourceManager<br>管理resource感觉就是文件用的 可能要配合下面的FileUpload用<br>除了有个基本的path-list 有add-path lookup open 函数可以用 之外 还有cache的作用</p>
<p>2557-2617行：<br>FileUpload  表示了一个上传的文件<br>两个核心的方法 获取filename save到一个地方</p>
<h3 id="Application-Helper"><a href="#Application-Helper" class="headerlink" title="Application Helper"></a>Application Helper</h3><p>2624-2727行：<br>主要是3个方法<br>abort 直接rasie一个异常<br>redirect 设置一个重定向的response然后返回<br>static_file 相对比较复杂 要涉及到403 404 minetype if-modified-since range 作者一块一块处理的 最后返回了一个HTTPResponse</p>
<h3 id="HTTP-Utilities"><a href="#HTTP-Utilities" class="headerlink" title="HTTP Utilities"></a>HTTP Utilities</h3><p>2734-2978行：<br>这里主要是一些parse的函数 处理date auth range http-header qsl<br>还有一些对cookie的decode 和 encode html的转义处理<br>返回一个函数对应的路由 这里可以返回多级匹配到的路由<br>还有一个path_shift 可以将script 和 path 两部分的目录shift给对方<br>还有一个auth_basic 是一个decoretor<br>最后有一个 简单的对外调用的接口 算是一种快捷方式吧</p>
<h3 id="Server-Adapter"><a href="#Server-Adapter" class="headerlink" title="Server Adapter"></a>Server Adapter</h3><p>2985-3338行 :<br>有一个ServerAdapter<br>然后有十几个不同的server继承这个ServerAdapter 都重写了run方法</p>
<h3 id="Application-Control"><a href="#Application-Control" class="headerlink" title="Application Control"></a>Application Control</h3><p>3345-3486行：<br>这里写了 load 负责加载module load_app 负责从appstack里去一个实例<br>然后有一个run 方法 负责跑起来实例 这个方法会一直block到server terminate<br>先是利用popen检测进程是不是terminate 接下来是正式的处理 获取bottle实例 安装插件 加载server模块 设置quite模式 reload的配置 需要加载下一个FileCheckerThread 除了继承Thread 就是 有一个每隔一个interval 比较一下 mtime 然后中断主进程 但是主进程是怎么重启的呢？</p>
<h3 id="Template-Adapter"><a href="#Template-Adapter" class="headerlink" title="Template Adapter"></a>Template Adapter</h3><p>3535-3954行：<br>实现了一个BaseTemplate 有search prepare render config几个方法 然后和 还有作者实现的template adpater 都继承这个BaseTemplate ：moko jinja2 cheetah<br>作者自己还写了个simpletemplate 然后自己 写了个parseSyntax的类 如果是其他的模板 至少我见过的方法是实现一个插件的形式来用别的模板 </p>
<p>3957-4021行：<br>这里又做了进一步的封装<br>template是已经做了一次整合 template_adapter作为参数拿进来用，然后 写了个view的decoretor 这次主要是为了使用方便吧 </p>
<h3 id="Constant-amp-Global"><a href="#Constant-amp-Global" class="headerlink" title="Constant&amp;Global"></a>Constant&amp;Global</h3><p>4027-4098行：<br>设置了一些全局的参数的默认值 比如 DEBUG  HTTP_CODE对应的REASON ERROR_PAGE 的内容<br>然后有几个比较有意思的语句<br>request response local 都是thread-safe的 分别是当前正在处理的 request response namespace 不过namespace 不是bottle的<br>apps app default_app 都是Appstack<br>bottle还支持导入 ext的包 如果以后发展开来 这个会用的多吧</p>
<p>4102-4153行：<br>main函数<br>取出配置的参数<br>什么host port 还有其他的config 一并读取没有问题以后 run </p>
<p>参考：</p>
<p><a href="http://blog.csdn.net/handsomekang/article/details/40297775" target="_blank" rel="external">http://blog.csdn.net/handsomekang/article/details/40297775</a><br><a href="http://my.oschina.net/taisha/blog/77413?fromerr=5koyI0Vc" target="_blank" rel="external">http://my.oschina.net/taisha/blog/77413?fromerr=5koyI0Vc</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/haystack/" itemprop="url">
                  haystack
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-22T23:51:38+08:00" content="2016-03-22">
              2016-03-22
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h3><p>每个数据只会写入一次、读操作频繁、从不修改、很少删除</p>
<h3 id="背景-amp-现状"><a href="#背景-amp-现状" class="headerlink" title="背景&amp;现状"></a>背景&amp;现状</h3><p>现有的缺点：<br>目录 导致 磁盘操作次数多 费时<br>文件元数据导致 存取效率 导致费时<br>现有的架构：<br>browser 请求 server 返回 cdn 或者 直接请求 cdn<br>cdn 后边是 stroage </p>
<h3 id="系统特点"><a href="#系统特点" class="headerlink" title="系统特点"></a>系统特点</h3><ol>
<li>分享照片而设计的对象存储技术</li>
<li>高吞吐量和低延迟 减少磁盘操作 </li>
<li>高容错 异地备份 </li>
<li>高性价比 </li>
<li>简单 容易开发和部署 （简约而不简单）</li>
</ol>
<h3 id="初期设计"><a href="#初期设计" class="headerlink" title="初期设计"></a>初期设计</h3><p>改动：cdn后边的stroage 变成 stroage server + nas（nas: 以数据为中心，将存储设备与服务器彻底分离，集中管理数据，从而释放带宽、提高性能、降低总拥有成本、保护投资的设备，其实是一个存储服务器。其成本远远低于使用服务器存储，而效率却远远高于后者）<br>优化：限制目录下文件数量（减少磁盘操作）<br>      文件打开 使用缓存（memcache）fd的方式 但是依旧不能解决冷数据的问题<br>小结：冷图片的问题需要单独拿出来解决 不能用钱解决ram/disk的比率而是要提高内存使用效率</p>
<h3 id="haystack设计"><a href="#haystack设计" class="headerlink" title="haystack设计"></a>haystack设计</h3><p>cdn尽管为底层存储挡住了大部分请求 但是还是不够用（因为冷图很难进cdn，所以long tail请求是导致磁盘操作的原因）<br>所以需要解决底层io的瓶颈 bottleneck 通过减少无用元数据 同时打包图片成一个大文件 维护这个大文件<br>三个模块：Store 持久化保存原始数据 每个volume 100G 多个physic对应一个logic<br>Directory 负责维护 volume信息和关系 image的一些更有用的元信息 Cache 在cdn后边的一个部署一个 内部cdn 为Store挡请求 减小外部cdn的依赖<br>url的设计 也体现了这个架构的特点上层失效才去下层拿数据，直到底层：<br>cdn/cache/store/volume/offset</p>
<p>接下来是更细致的介绍</p>
<ol>
<li><p>Directory<br>四个作用：<br>保存logic到physic的关系<br>对写logic和读physic两种操作做均衡<br>分发photo处理对象cdn or cache 路由的功能<br>指定volume状态 例如reaonly 粒度是machine</p>
</li>
<li><p>Cache<br>直接返回request里的所需的图片 没有命中就可以从cdn里取 大致上就是一个分布式hash表 </p>
</li>
<li><p>Store<br>一个很简单的存储系统 给一些信息 然后成功返回图片 否则给错误提示<br>结构是每个机器好多个volunme 每个volume好多个file 给定volume id 和 offset 就可以定位文件（Haystack design: retrieving the filename, offset, and size for a particular photo without needing disk operations） 内存中会有voluem的fd 和有一个image id to meta数据的map<br>每个needle就是一个file<br>刚刚说的那个map 就是 key，alternative-key 到 offset，size，flag的一个映射<br>用来快速检索needle 机器crash后可以全盘扫描后生成这个map<br>三种基本操作：<br>读 cookie 随上传时间给定 可以保证安全性 防止伪造url攻击 map里取出value后要验证cookie 和 flag才返回给cache 然后cache在网上返回<br>写 先从Directory里获取volume位置 然后提供cookie key alternativekey 和原数据 往logic写入的同时 physic也写入 准确的说是append。map也要更新。对于修改的操作 要用相同的key 和 alternativekey 添加一个新的neddle 如果新needle在这个volume，更大的offset意味着更新数据 如果添加啊到别的volume 就在directory上进行改动<br>删 更新 map（内存中） 超级块中的flag 标记删除</p>
</li>
<li><p>index<br>为了重启后快速恢复内存里的map 每一个volume有一个index 这个index布局与volume中的needle <strong>类似</strong> 顺序与volume中的needle <strong>相同</strong> 内容就map的key+value<br>写文件时map是同步更新的 而index是异步更新的 这意味着index不是最新的<br>删文件时 也不会去更新index 这意味着index不能反映图片是否删除<br>没有index记录的needle是一个orphan 重启时可以检查（从index末尾也就是volume末尾开始处理orphan）然后才恢复map<br>删除的问题 在检索的时候 可以通过取出文件后检查原数据中的flag来更新map</p>
</li>
<li><p>故障恢复<br>这部分主要有两个工作 探测 和 修复<br>探测叫pitch-fork 定期远程测试machine 测试连接 avail size 等 如果有问题就直接标记为readonly 线下人工修复<br>修复一般很快 只有非常严重的情况 需要大量同步 这种修复很耗时 因为nic有上限</p>
</li>
<li><p>优化<br>这里有几个很有意义的优化：<br><strong>压缩</strong> 回收重复 已删除文件的空间 就是从现有volume复制到新volume跳过不需要的 needle Directory也需要做改动<br><strong>内存效率</strong> 之前好奇index的地方为什么检索的时候不查map的flag 原因是map里其实不存flag和cookie offset=0表示删掉了 取出来才检查cookie（问题不但没解决反而多了 1.那为什么检索的时候不看map的offset呢？2.忘掉了 囧… 实在是不能想起来了）<br>还有一点就是减小了每一个image inode需要使用内存<br><strong>批量上传</strong> 大型连续写时的性能要比随机写好</p>
</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/what-is-wsgi/" itemprop="url">
                  What is WSGI
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-09T16:52:39+08:00" content="2016-03-09">
              2016-03-09
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>WSGI（Web Server Gateway Interface，Web服务器网关接口，读成’wiz-gee’？）<br>是Python语言定义的server或gateway与client或framework之间的一种简单而通用的接口，是一种标准，规范</p>
<p>之前，Web应用框架的选择将限制可用的Web服务器的选择，反之亦然。而统一了两者交互的接口之后，只要符合这个规范，就能更自由的选择框架和服务器的组合了，同时应用可移植性提高了。</p>
<p>WSGI是基于现存的CGI标准而设计的。<br>什么是CGI？<br>一个网站的动态内容肯定是程序生成的，光是静态的html页面无法达到这个效果。那么，这个程序就需要接受客户端的请求，然后进行相应处理，再返回给客户端。然后我们会发现，这个程序在处理客户端请求的时候，大部分时候会进行很多重复的工作，比如说HTTP请求的解析。也就是说，你的程序需要解析HTTP请求，我的程序也需要解析。</p>
<p>于是为了DRY原则，Web服务器诞生了。（以下所说的都是CGI的工作模式）</p>
<p>Web服务器可以解析这个HTTP请求，然后把这个请求的各种参数写进进程的环境变量，比如REQUEST_METHOD，PATH_INFO之类的。之后呢，服务器会调用相应的程序来处理这个请求，它会负责生成动态内容，然后返回给服务器，再由服务器转交给客户端。服务器和CGI程序之间通信，一般是通过进程的环境变量和管道。</p>
<p>这样做虽然很清晰，但缺点就是每次有请求，服务器都会fork and exec，每次都会有一个新的进程产生，开销还是比较大的。</p>
<p>而WSGI的规范是，有三个部分server，application，middleware。</p>
<p>client发出request给server，<br>server将这个reuqest交给application处理，这个过程有一个middleware掺进来。middleware拦截（或者由server传给middleware）request，并做一些包装（或者预处理）以后传给application，application处理完给出response，同样经过middleware包装传给server，然后server将这个response返回给client。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">application</span><span class="params">(environ,start_response)</span>:</span></div><div class="line">    do_something</div><div class="line">    start_response</div></pre></td></tr></table></figure>
<p>environ是一个dict，app 执行所需的数据，<br>start_response是一个callback，供上层调用，比如返回时包装用</p>
<p>可见 middleware在server和application之间起调解作用：从WSGI服务器的角度来说，中间件扮演应用程序，而从应用程序的角度来说，中间件扮演服务器。</p>
<p>所以middleware要具备一些功能，比如route（负载均衡），包装req和rsp，render（内容处理）<br>从设计模式的角度看 middleware 就是装饰器模式<br>middleware的好处 大概就是会细化工作，解耦server上的工作，可移植性</p>
<p>可以说别的语言中的容器 就是一种middleware </p>
<p>所以看现在的bottle 到底是个什么<br>Bottle is a fast, simple and lightweight WSGI micro web-framework for Python.</p>
<ul>
<li>Routing</li>
<li>Template</li>
<li>Utilities</li>
<li>Server</li>
</ul>
<p>这下清晰一点了</p>
<p>参考<br><a href="https://www.zhihu.com/question/19998865/answer/29395327" target="_blank" rel="external">https://www.zhihu.com/question/19998865/answer/29395327</a><br><a href="https://zh.wikipedia.org/wiki/Web服务器网关接口" target="_blank" rel="external">https://zh.wikipedia.org/wiki/Web服务器网关接口</a><br><a href="https://segmentfault.com/a/1190000003069785" target="_blank" rel="external">https://segmentfault.com/a/1190000003069785</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/02/git-study-1/" itemprop="url">
                  git-study-1
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-02-17T13:55:32+08:00" content="2016-02-17">
              2016-02-17
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="开始"><a href="#开始" class="headerlink" title="开始"></a><strong>开始</strong></h3><h4 id="1-clone"><a href="#1-clone" class="headerlink" title="1.clone"></a>1.clone</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git <span class="built_in">clone</span> repository</div><div class="line">git <span class="built_in">clone</span> repository directory</div></pre></td></tr></table></figure>
<h4 id="2-init"><a href="#2-init" class="headerlink" title="2.init"></a>2.init</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git init </div><div class="line">git init directory</div></pre></td></tr></table></figure>
<h4 id="3-config"><a href="#3-config" class="headerlink" title="3.config"></a>3.config</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">git config --global user.name <span class="string">"ff"</span></div><div class="line">git config --global user.email bestone@is.me</div><div class="line">git config --global core.editor vim</div><div class="line">git config --list</div></pre></td></tr></table></figure>
<h3 id="本地"><a href="#本地" class="headerlink" title="本地"></a><strong>本地</strong></h3><h4 id="1-add"><a href="#1-add" class="headerlink" title="1.add"></a>1.add</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git add filename</div><div class="line">git add directroy/</div><div class="line">git add .</div></pre></td></tr></table></figure>
<h4 id="2-rm"><a href="#2-rm" class="headerlink" title="2.rm"></a>2.rm</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git rm filaname</div></pre></td></tr></table></figure>
<h4 id="3-commit"><a href="#3-commit" class="headerlink" title="3.commit"></a>3.commit</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git commit -m <span class="string">'message'</span></div><div class="line">git commit --amend</div></pre></td></tr></table></figure>
<h4 id="4-reset"><a href="#4-reset" class="headerlink" title="4.reset"></a>4.reset</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git reset --filename</div></pre></td></tr></table></figure>
<h4 id="5-checkout"><a href="#5-checkout" class="headerlink" title="5.checkout"></a>5.checkout</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git checkout branchname</div><div class="line">git checkout filename</div><div class="line">git checkout commit</div></pre></td></tr></table></figure>
<h4 id="6-stash"><a href="#6-stash" class="headerlink" title="6.stash"></a>6.stash</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git stash</div><div class="line">git stash list</div><div class="line">git stash apply</div></pre></td></tr></table></figure>
<h3 id="记录"><a href="#记录" class="headerlink" title="记录"></a><strong>记录</strong></h3><h4 id="1-status"><a href="#1-status" class="headerlink" title="1.status"></a>1.status</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git status</div></pre></td></tr></table></figure>
<h4 id="2-log"><a href="#2-log" class="headerlink" title="2.log"></a>2.log</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git <span class="built_in">log</span></div></pre></td></tr></table></figure>
<h4 id="3-diff"><a href="#3-diff" class="headerlink" title="3.diff"></a>3.diff</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">git diff</div><div class="line">git diff --cache</div><div class="line">git diff commit commit</div><div class="line">git diff branchname</div></pre></td></tr></table></figure>
<h3 id="分支"><a href="#分支" class="headerlink" title="分支"></a><strong>分支</strong></h3><h4 id="1-branch"><a href="#1-branch" class="headerlink" title="1.branch"></a>1.branch</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">git branch </div><div class="line">git branch branchname</div><div class="line">git branch <span class="_">-d</span> branchname</div><div class="line">git branch -D branchname</div></pre></td></tr></table></figure>
<h4 id="2-merge"><a href="#2-merge" class="headerlink" title="2.merge"></a>2.merge</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git merge branchname</div></pre></td></tr></table></figure>
<h3 id="远程"><a href="#远程" class="headerlink" title="远程"></a><strong>远程</strong></h3><h4 id="1-remote"><a href="#1-remote" class="headerlink" title="1.remote"></a>1.remote</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git remote -v</div><div class="line">git remote show</div></pre></td></tr></table></figure>
<h4 id="2-push"><a href="#2-push" class="headerlink" title="2.push"></a>2.push</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git push origin branchname</div></pre></td></tr></table></figure>
<h4 id="3-pull"><a href="#3-pull" class="headerlink" title="3.pull"></a>3.pull</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git pull</div></pre></td></tr></table></figure>
<h4 id="4-fetch"><a href="#4-fetch" class="headerlink" title="4.fetch"></a>4.fetch</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/02/test/" itemprop="url">
                  test
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-02-12T00:07:35+08:00" content="2016-02-12">
              2016-02-12
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="欢迎使用-Cmd-Markdown-编辑阅读器"><a href="#欢迎使用-Cmd-Markdown-编辑阅读器" class="headerlink" title="欢迎使用 Cmd Markdown 编辑阅读器"></a>欢迎使用 Cmd Markdown 编辑阅读器</h1><hr>
<p>我们理解您需要更便捷更高效的工具记录思想，整理笔记、知识，并将其中承载的价值传播给他人，<strong>Cmd Markdown</strong> 是我们给出的答案 —— 我们为记录思想和分享知识提供更专业的工具。 您可以使用 Cmd Markdown：</p>
<blockquote>
<ul>
<li>整理知识，学习笔记</li>
<li>发布日记，杂文，所见所想</li>
<li>撰写发布技术文稿（代码支持）</li>
<li>撰写发布学术论文（LaTeX 公式支持）</li>
</ul>
</blockquote>
<p><img src="https://www.zybuluo.com/static/img/logo.png" alt="cmd-markdown-logo"></p>
<p>除了您现在看到的这个 Cmd Markdown 在线版本，您还可以前往以下网址下载：</p>
<h3 id="Windows-Mac-Linux-全平台客户端"><a href="#Windows-Mac-Linux-全平台客户端" class="headerlink" title="Windows/Mac/Linux 全平台客户端"></a><a href="https://www.zybuluo.com/cmd/" target="_blank" rel="external">Windows/Mac/Linux 全平台客户端</a></h3><blockquote>
<p>请保留此份 Cmd Markdown 的欢迎稿兼使用说明，如需撰写新稿件，点击顶部工具栏右侧的 <i class="icon-file"></i> <strong>新文稿</strong> 或者使用快捷键 <code>Ctrl+Alt+N</code>。</p>
</blockquote>
<hr>
<h2 id="什么是-Markdown"><a href="#什么是-Markdown" class="headerlink" title="什么是 Markdown"></a>什么是 Markdown</h2><p>Markdown 是一种方便记忆、书写的纯文本标记语言，用户可以使用这些标记符号以最小的输入代价生成极富表现力的文档：譬如您正在阅读的这份文档。它使用简单的符号标记不同的标题，分割不同的段落，<strong>粗体</strong> 或者 <em>斜体</em> 某些文字，更棒的是，它还可以</p>
<h3 id="1-制作一份待办事宜-Todo-列表"><a href="#1-制作一份待办事宜-Todo-列表" class="headerlink" title="1. 制作一份待办事宜 Todo 列表"></a>1. 制作一份待办事宜 <a href="https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown#13-待办事宜-todo-列表" target="_blank" rel="external">Todo 列表</a></h3><ul>
<li>[ ] 支持以 PDF 格式导出文稿</li>
<li>[ ] 改进 Cmd 渲染算法，使用局部渲染技术提高渲染效率</li>
<li>[x] 新增 Todo 列表功能</li>
<li>[x] 修复 LaTex 公式渲染问题</li>
<li>[x] 新增 LaTex 公式编号功能</li>
</ul>
<h3 id="2-书写一个质能守恒公式-LaTeX"><a href="#2-书写一个质能守恒公式-LaTeX" class="headerlink" title="2. 书写一个质能守恒公式[^LaTeX]"></a>2. 书写一个质能守恒公式[^LaTeX]</h3><p>$$E=mc^2$$</p>
<h3 id="3-高亮一段代码-code"><a href="#3-高亮一段代码-code" class="headerlink" title="3. 高亮一段代码[^code]"></a>3. 高亮一段代码[^code]</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@requires_authorization</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span>:</span></div><div class="line">    <span class="keyword">pass</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    <span class="comment"># A comment</span></div><div class="line">    <span class="keyword">print</span> <span class="string">'hello world'</span></div></pre></td></tr></table></figure>
<h3 id="4-高效绘制-流程图"><a href="#4-高效绘制-流程图" class="headerlink" title="4. 高效绘制 流程图"></a>4. 高效绘制 <a href="https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown#7-流程图" target="_blank" rel="external">流程图</a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">st=&gt;start: Start</div><div class="line">op=&gt;operation: Your Operation</div><div class="line">cond=&gt;condition: Yes or No?</div><div class="line">e=&gt;end</div><div class="line"></div><div class="line">st-&gt;op-&gt;cond</div><div class="line">cond(yes)-&gt;e</div><div class="line">cond(no)-&gt;op</div></pre></td></tr></table></figure>
<h3 id="5-高效绘制-序列图"><a href="#5-高效绘制-序列图" class="headerlink" title="5. 高效绘制 序列图"></a>5. 高效绘制 <a href="https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown#8-序列图" target="_blank" rel="external">序列图</a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Alice-&gt;Bob: Hello Bob, how are you?</div><div class="line">Note right of Bob: Bob thinks</div><div class="line">Bob--&gt;Alice: I am good thanks!</div></pre></td></tr></table></figure>
<h3 id="6-绘制表格"><a href="#6-绘制表格" class="headerlink" title="6. 绘制表格"></a>6. 绘制表格</h3><table>
<thead>
<tr>
<th>项目</th>
<th style="text-align:right">价格</th>
<th style="text-align:center">数量</th>
</tr>
</thead>
<tbody>
<tr>
<td>计算机</td>
<td style="text-align:right">\$1600</td>
<td style="text-align:center">5</td>
</tr>
<tr>
<td>手机</td>
<td style="text-align:right">\$12</td>
<td style="text-align:center">12</td>
</tr>
<tr>
<td>管线</td>
<td style="text-align:right">\$1</td>
<td style="text-align:center">234</td>
</tr>
</tbody>
</table>
<h3 id="7-更详细语法说明"><a href="#7-更详细语法说明" class="headerlink" title="7. 更详细语法说明"></a>7. 更详细语法说明</h3><p>想要查看更详细的语法说明，可以参考我们准备的 <a href="https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown" target="_blank" rel="external">Cmd Markdown 简明语法手册</a>，进阶用户可以参考 <a href="https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown#cmd-markdown-高阶语法手册" target="_blank" rel="external">Cmd Markdown 高阶语法手册</a> 了解更多高级功能。</p>
<p>总而言之，不同于其它 <em>所见即所得</em> 的编辑器：你只需使用键盘专注于书写文本内容，就可以生成印刷级的排版格式，省却在键盘和工具栏之间来回切换，调整内容和格式的麻烦。<strong>Markdown 在流畅的书写和印刷级的阅读体验之间找到了平衡。</strong> 目前它已经成为世界上最大的技术分享网站 GitHub 和 技术问答网站 StackOverFlow 的御用书写格式。</p>
<hr>
<h2 id="什么是-Cmd-Markdown"><a href="#什么是-Cmd-Markdown" class="headerlink" title="什么是 Cmd Markdown"></a>什么是 Cmd Markdown</h2><p>您可以使用很多工具书写 Markdown，但是 Cmd Markdown 是这个星球上我们已知的、最好的 Markdown 工具——没有之一 ：）因为深信文字的力量，所以我们和你一样，对流畅书写，分享思想和知识，以及阅读体验有极致的追求，我们把对于这些诉求的回应整合在 Cmd Markdown，并且一次，两次，三次，乃至无数次地提升这个工具的体验，最终将它演化成一个 <strong>编辑/发布/阅读</strong> Markdown 的在线平台——您可以在任何地方，任何系统/设备上管理这里的文字。</p>
<h3 id="1-实时同步预览"><a href="#1-实时同步预览" class="headerlink" title="1. 实时同步预览"></a>1. 实时同步预览</h3><p>我们将 Cmd Markdown 的主界面一分为二，左边为<strong>编辑区</strong>，右边为<strong>预览区</strong>，在编辑区的操作会实时地渲染到预览区方便查看最终的版面效果，并且如果你在其中一个区拖动滚动条，我们有一个巧妙的算法把另一个区的滚动条同步到等价的位置，超酷！</p>
<h3 id="2-编辑工具栏"><a href="#2-编辑工具栏" class="headerlink" title="2. 编辑工具栏"></a>2. 编辑工具栏</h3><p>也许您还是一个 Markdown 语法的新手，在您完全熟悉它之前，我们在 <strong>编辑区</strong> 的顶部放置了一个如下图所示的工具栏，您可以使用鼠标在工具栏上调整格式，不过我们仍旧鼓励你使用键盘标记格式，提高书写的流畅度。</p>
<p><img src="https://www.zybuluo.com/static/img/toolbar-editor.png" alt="tool-editor"></p>
<h3 id="3-编辑模式"><a href="#3-编辑模式" class="headerlink" title="3. 编辑模式"></a>3. 编辑模式</h3><p>完全心无旁骛的方式编辑文字：点击 <strong>编辑工具栏</strong> 最右测的拉伸按钮或者按下 <code>Ctrl + M</code>，将 Cmd Markdown 切换到独立的编辑模式，这是一个极度简洁的写作环境，所有可能会引起分心的元素都已经被挪除，超清爽！</p>
<h3 id="4-实时的云端文稿"><a href="#4-实时的云端文稿" class="headerlink" title="4. 实时的云端文稿"></a>4. 实时的云端文稿</h3><p>为了保障数据安全，Cmd Markdown 会将您每一次击键的内容保存至云端，同时在 <strong>编辑工具栏</strong> 的最右侧提示 <code>已保存</code> 的字样。无需担心浏览器崩溃，机器掉电或者地震，海啸——在编辑的过程中随时关闭浏览器或者机器，下一次回到 Cmd Markdown 的时候继续写作。</p>
<h3 id="5-离线模式"><a href="#5-离线模式" class="headerlink" title="5. 离线模式"></a>5. 离线模式</h3><p>在网络环境不稳定的情况下记录文字一样很安全！在您写作的时候，如果电脑突然失去网络连接，Cmd Markdown 会智能切换至离线模式，将您后续键入的文字保存在本地，直到网络恢复再将他们传送至云端，即使在网络恢复前关闭浏览器或者电脑，一样没有问题，等到下次开启 Cmd Markdown 的时候，她会提醒您将离线保存的文字传送至云端。简而言之，我们尽最大的努力保障您文字的安全。</p>
<h3 id="6-管理工具栏"><a href="#6-管理工具栏" class="headerlink" title="6. 管理工具栏"></a>6. 管理工具栏</h3><p>为了便于管理您的文稿，在 <strong>预览区</strong> 的顶部放置了如下所示的 <strong>管理工具栏</strong>：</p>
<p><img src="https://www.zybuluo.com/static/img/toolbar-manager.jpg" alt="tool-manager"></p>
<p>通过管理工具栏可以：</p>
<p><i class="icon-share"></i> 发布：将当前的文稿生成固定链接，在网络上发布，分享<br><i class="icon-file"></i> 新建：开始撰写一篇新的文稿<br><i class="icon-trash"></i> 删除：删除当前的文稿<br><i class="icon-cloud"></i> 导出：将当前的文稿转化为 Markdown 文本或者 Html 格式，并导出到本地<br><i class="icon-reorder"></i> 列表：所有新增和过往的文稿都可以在这里查看、操作<br><i class="icon-pencil"></i> 模式：切换 普通/Vim/Emacs 编辑模式</p>
<h3 id="7-阅读工具栏"><a href="#7-阅读工具栏" class="headerlink" title="7. 阅读工具栏"></a>7. 阅读工具栏</h3><p><img src="https://www.zybuluo.com/static/img/toolbar-reader.jpg" alt="tool-manager"></p>
<p>通过 <strong>预览区</strong> 右上角的 <strong>阅读工具栏</strong>，可以查看当前文稿的目录并增强阅读体验。</p>
<p>工具栏上的五个图标依次为：</p>
<p><i class="icon-list"></i> 目录：快速导航当前文稿的目录结构以跳转到感兴趣的段落<br><i class="icon-chevron-sign-left"></i> 视图：互换左边编辑区和右边预览区的位置<br><i class="icon-adjust"></i> 主题：内置了黑白两种模式的主题，试试 <strong>黑色主题</strong>，超炫！<br><i class="icon-desktop"></i> 阅读：心无旁骛的阅读模式提供超一流的阅读体验<br><i class="icon-fullscreen"></i> 全屏：简洁，简洁，再简洁，一个完全沉浸式的写作和阅读环境</p>
<h3 id="8-阅读模式"><a href="#8-阅读模式" class="headerlink" title="8. 阅读模式"></a>8. 阅读模式</h3><p>在 <strong>阅读工具栏</strong> 点击 <i class="icon-desktop"></i> 或者按下 <code>Ctrl+Alt+M</code> 随即进入独立的阅读模式界面，我们在版面渲染上的每一个细节：字体，字号，行间距，前背景色都倾注了大量的时间，努力提升阅读的体验和品质。</p>
<h3 id="9-标签、分类和搜索"><a href="#9-标签、分类和搜索" class="headerlink" title="9. 标签、分类和搜索"></a>9. 标签、分类和搜索</h3><p>在编辑区任意行首位置输入以下格式的文字可以标签当前文档：</p>
<p>标签： 未分类</p>
<p>标签以后的文稿在【文件列表】（Ctrl+Alt+F）里会按照标签分类，用户可以同时使用键盘或者鼠标浏览查看，或者在【文件列表】的搜索文本框内搜索标题关键字过滤文稿，如下图所示：</p>
<p><img src="https://www.zybuluo.com/static/img/file-list.png" alt="file-list"></p>
<h3 id="10-文稿发布和分享"><a href="#10-文稿发布和分享" class="headerlink" title="10. 文稿发布和分享"></a>10. 文稿发布和分享</h3><p>在您使用 Cmd Markdown 记录，创作，整理，阅读文稿的同时，我们不仅希望它是一个有力的工具，更希望您的思想和知识通过这个平台，连同优质的阅读体验，将他们分享给有相同志趣的人，进而鼓励更多的人来到这里记录分享他们的思想和知识，尝试点击 <i class="icon-share"></i> (Ctrl+Alt+P) 发布这份文档给好友吧！</p>
<hr>
<p>再一次感谢您花费时间阅读这份欢迎稿，点击 <i class="icon-file"></i> (Ctrl+Alt+N) 开始撰写新的文稿吧！祝您在这里记录、阅读、分享愉快！</p>
<p>作者 <a href="http://weibo.com/ghosert" target="_blank" rel="external">@ghosert</a><br>2015 年 06月 15日    </p>
<p>[^LaTeX]: 支持 <strong>LaTeX</strong> 编辑显示支持，例如：$\sum_{i=1}^n a_i=0$， 访问 <a href="http://meta.math.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference" target="_blank" rel="external">MathJax</a> 参考更多使用方法。</p>
<p>[^code]: 代码高亮功能支持包括 Java, Python, JavaScript 在内的，<strong>四十一</strong>种主流编程语言。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="FF" />
          <p class="site-author-name" itemprop="name">FF</p>
          <p class="site-description motion-element" itemprop="description">努力是看不见的，能看见的只有结果</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">8</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">FF</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  

  

  

</body>
</html>
